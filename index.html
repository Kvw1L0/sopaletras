<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sopa de Letras</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: url('fondo.jpg') center/cover no-repeat fixed;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-attachment: fixed;
  }
  #grid {
    display: grid;
    gap: 5px;
    margin-top: 120px;
    margin-bottom: 20px;
    user-select: none;
    padding: 20px; /* agregado para que no choquen con el borde */
  }
  .cell {
    width: 30px;
    height: 30px;
    background: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    border-radius: 4px;
    cursor: pointer;
    user-select: none;
    border: 1px solid black;
  }
  .found {
    background: yellow !important;
  }
  #clues {
    width: 90%;
    max-width: 600px;
    margin-top: 10px;
    background: white;
    padding: 15px;
    border-radius: 6px;
  }
  #clues li {
    margin: 8px 0;
  }
  .clue-found::after {
    content: " ✔️";
    color: green;
    font-weight: bold;
  }
  #whatsappBtn {
    display: none;
    padding: 10px 20px;
    background: #25D366;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 18px;
    cursor: pointer;
    margin-top: 20px;
  }
</style>
</head>
<body>

<div id="grid"></div>
<ul id="clues"></ul>
<button id="whatsappBtn">Enviar por WhatsApp</button>
<script>
// >>> NÚMERO DE WHATSAPP CONFIGURADO <<<
const whatsappNumber = "56994406706";

const clues = [
  "1. Trabajar juntos hacía un objetivo común",
  "2. Intercambio de información e ideas entre miembros del equipo",
  "3. Creencia en la capacidad y la integridad de los demás",
  "4. Generación de ideas nuevas y originales en grupo",
  "5. Capacidad para encontrar soluciones a problemas en equipo",
  "6. Habilidad para notar detalles y dinámicas grupales",
  "7. Plantear preguntas para profundizar en la comprensión",
  "8. Unir esfuerzos y recursos para alcanzar metas comunes",
  "9. Interacción activa y efectiva entre los miembros del equipo",
  "10. Proveer ayuda y respaldo a los compañeros en el trabajo"
];

const words = [
  "COLABORAR",
  "COMUNICAR",
  "CONFIAR",
  "CREAR",
  "RESOLVER",
  "OBSERVAR",
  "CUESTIONAR",
  "ASOCIAR",
  "DINAMIZAR",
  "APOYAR"
];

// Mostrar pistas
const cluesList = document.getElementById("clues");
clues.forEach((c, i) => {
  const li = document.createElement("li");
  li.id = `clue-${i}`;
  li.textContent = c;
  cluesList.appendChild(li);
});

// Tamaño según palabra más larga
const maxLen = Math.max(...words.map(w => w.length));
let size = Math.max(7, maxLen + 3);

const gridDiv = document.getElementById("grid");

function createGrid(n) {
  return Array.from({length: n}, () => Array.from({length: n}, () => ""));
}

let grid = createGrid(size);

// SOLO horizontal y vertical
const directions = [ [1,0], [0,1] ];

function placeWord(word, grid) {
  let attempts = 0;
  const N = grid.length;

  while (attempts < 300) {
    attempts++;

    const [dx, dy] = directions[Math.floor(Math.random() * directions.length)];

    const maxX = dx === 1 ? N - word.length : N - 1;
    const maxY = dy === 1 ? N - word.length : N - 1;

    const x = Math.floor(Math.random() * (maxX + 1));
    const y = Math.floor(Math.random() * (maxY + 1));

    let fits = true;
    for (let i = 0; i < word.length; i++) {
      const nx = x + dx*i;
      const ny = y + dy*i;

      if (grid[ny][nx] && grid[ny][nx] !== word[i]) {
        fits = false;
        break;
      }
    }
    if (!fits) continue;

    for (let i = 0; i < word.length; i++) {
      const nx = x + dx*i;
      const ny = y + dy*i;
      grid[ny][nx] = word[i];
    }

    return true;
  }

  return false;
}

// Intentar aumentar grilla si no caben
function generateGrid() {
  let maxSize = 30;
  while (size <= maxSize) {
    grid = createGrid(size);
    let ok = true;
    for (let w of words) {
      if (!placeWord(w, grid)) { ok = false; break; }
    }
    if (ok) return;
    size++;
  }
  // fallback: fill anyway
  grid = createGrid(size);
}

generateGrid();

// Rellenar con letras
for (let r = 0; r < grid.length; r++) {
  for (let c = 0; c < grid.length; c++) {
    if (!grid[r][c]) {
      grid[r][c] = String.fromCharCode(65 + Math.floor(Math.random()*26));
    }
  }
}

// Render
gridDiv.style.gridTemplateColumns = `repeat(${grid.length}, 30px)`;

gridDiv.innerHTML = "";
for (let r = 0; r < grid.length; r++) {
  for (let c = 0; c < grid.length; c++) {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.textContent = grid[r][c];
    cell.dataset.r = r;
    cell.dataset.c = c;
    gridDiv.appendChild(cell);
  }
}

// Selección
let selection = [];
const foundWords = new Set();

gridDiv.addEventListener("click", e => {
  if (!e.target.classList.contains("cell")) return;
  const cell = e.target;

  if (selection.includes(cell)) return;

  cell.style.background = "#add8e6";
  selection.push(cell);

  checkWord();
});

function checkWord() {
  const str = selection.map(c => c.textContent).join("");
  const rev = selection.map(c => c.textContent).reverse().join("");

  for (let i = 0; i < words.length; i++) {
    const w = words[i];
    if ((str === w || rev === w) && !foundWords.has(w)) {
      foundWords.add(w);

      selection.forEach(c => c.classList.add("found"));

      const clueLi = document.getElementById(`clue-${i}`);
      clueLi.classList.add("clue-found");

      selection = [];
      break;
    }
  }

  if (foundWords.size === words.length) {
    document.getElementById("whatsappBtn").style.display = "inline-block";
  }
}

// WhatsApp
function sendWhatsApp() {
  const list = Array.from(foundWords).join(", ");
  const mensaje = encodeURIComponent(`Palabras encontradas: ${list}`);
  const url = `https://wa.me/${whatsappNumber}?text=${mensaje}`;
  window.open(url, "_blank");
}

document.getElementById("whatsappBtn").addEventListener("click", sendWhatsApp);
</script>
</body>
</html>

